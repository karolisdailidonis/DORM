<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Request test</title>
</head>
<body>
    <h1>Response</h1>


    <input id="apiurl" type="text" readonly >

    <textarea id="response" cols="60" rows="20"></textarea>

    <textarea id="requestJob" cols="60" rows="20">
    {
        "schema": "DORM 0.0.3",
        "tokken": "1234556",
        "tables": [
            {
                "requestJob": "read",
                "from": "person",
                "columns": [
                    { "column": "surname"},
                    { "column": "name"}
                ],
                "where": {
                    "column": "person_id",
                    "value": 80,
                    "condition": "="
                }
        
            }   
        ]
    }
    </textarea>
    <button onclick="request()"  >Request</button>

    <script >
        const responseHTML = document.querySelector('#response');
        const requestJob = document.querySelector('#requestJob');
        const apiurl = document.querySelector('#apiurl');

        apiurl.value = window.location.hostname;
        console.log(apiurl);


        console.log(requestJob.value);

        function request(){
            var resp = axios.post( "http://" + apiurl.value + '/api.php',
                    JSON.parse( requestJob.value )
                )
                .then(
                    (response, d) => {
                    responseHTML.innerHTML = JSON.stringify( response.data, undefined, 4 );
                    console.log( response );

                })
                .catch(function (error) {
                    console.log(error);
                });
        }
        

    </script>
</body>
</html>